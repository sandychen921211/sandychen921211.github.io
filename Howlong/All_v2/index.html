<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WAITING DETECTOR</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body>
    <div id="viewport">
      <div class="stage" id="app">
        <img class="bg_mov" src="./assets/img/bg_mov.gif" />
        <img class="bg" src="./assets/img/bg.png" />

        <div class="accent top"></div>
        <div class="hairline bottom"></div>

        <img class="png png-tl" src="./assets/img/top_left_icon.png" />
        <img class="png png-tr" src="./assets/img/top_right_icon.png" />

        <div class="photobooth">PHOTOBOOTH</div>

        <div class="title">
          <img src="./assets/img/title.png" />
        </div>

        <div class="live-wrap">
          <img src="./assets/img/frame.png" />
          <div class="live-inner">
            <video id="video" autoplay playsinline muted></video>

            <!-- ✅ 新增：人物遮罩 -->
            <canvas id="maskCanvas"></canvas>

            <!-- blob -->
            <canvas id="blobCanvas"></canvas>

            <div class="rec"><img src="./assets/img/REC.png" /></div>
            <div class="dash dash-left"></div>
            <div class="dash dash-mid"></div>

            <div class="anx">
              <div class="anx-title">焦慮指數</div>
              <div class="anx-title-2">anxiety Index</div>

              <!-- ✅ 修正：anx-bar 需要一個 anx-fill -->
              <div class="anx-bar">
                <div class="anx-fill"></div>
              </div>

              <div class="anx-scale">
                <div>極MAX</div>
                <div>高HIGH</div>
                <div>中MED</div>
                <div>低LOW</div>
                <div>無NONE</div>
              </div>

              <div class="gear">
                <img id="gearImg" src="./assets/img/gear.png" alt="gear" />
              </div>
            </div>
          </div>
        </div>

        <div class="hud">
          <div class="hud-icon">
            <img src="./assets/img/person.png" />
            <div class="facerig"><img src="./assets/img/facerig.png" /></div>
          </div>

          <div class="hud-right">
            <div class="pills">
              <div class="pill_01">
                <img class="member-icon" src="./assets/img/member.png" />
                <div class="member-num">00000001</div>
                <img src="./assets/img/pill_button.png" />
              </div>

              <div class="pill_02">
                <div class="pill-title">
                  <span>- (</span> 行為重複次數 <span>) -</span>
                </div>
                <div class="pill-sub">Repetition Count</div>
              </div>

              <div class="pill_02">
                <div class="pill-title">
                  <span>- (</span> 等待焦躁指數 <span>) -</span>
                </div>
                <div class="pill-sub">Waiting Anxiety Index</div>
              </div>
            </div>

            <div class="stats">
              <div class="stat01">
                <div class="stat-num" id="timeText">00:00:00</div>

                <div class="engagement-wheel">
                  <div class="engagement-wheel-inner" id="engagementWheel">
                    <div>01&nbsp; Baseline</div>
                    <div>02&nbsp; Mild Alert</div>
                    <div>03&nbsp; Adaptive Threshold</div>
                    <div>04&nbsp; Visible Restlessness</div>
                    <div>05&nbsp; High Interference</div>
                  </div>
                </div>
              </div>

              <div class="stat02 action-single">
                <div id="actionCount" class="action-num">00</div>
                <span class="count-unit">次</span>
              </div>
              <div class="stat-num big" id="pctText">0%></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="pageTransition"></div>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5/pose.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation@0.1/selfie_segmentation.js"></script>

    <script src="./js/blob.js"></script>
    <script src="./js/pose.js"></script>
    <!-- <script src="./js/mask.js"></script>-->

    <script type="module" src="./js/uploadshot.js"></script>
    <script src="./js/ui.js"></script>
  </body>
</html>
